<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Astro AI ‚ú®</title>
    
    <!-- Telegram Web App Script -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            /* –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞ 2025 */
            --bg-primary: #0a0a0f;
            --bg-secondary: #12121a;
            --bg-card: rgba(255, 255, 255, 0.03);
            --bg-glass: rgba(255, 255, 255, 0.05);
            
            --accent-purple: #8b5cf6;
            --accent-pink: #ec4899;
            --accent-blue: #3b82f6;
            --accent-cyan: #06b6d4;
            --accent-gold: #f59e0b;
            
            --gradient-primary: linear-gradient(135deg, #8b5cf6 0%, #ec4899 50%, #f59e0b 100%);
            --gradient-card: linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(236, 72, 153, 0.1) 100%);
            --gradient-glow: radial-gradient(circle at 50% 50%, rgba(139, 92, 246, 0.3) 0%, transparent 70%);
            
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.7);
            --text-muted: rgba(255, 255, 255, 0.4);
            
            --border-color: rgba(255, 255, 255, 0.08);
            --shadow-glow: 0 0 60px rgba(139, 92, 246, 0.3);
            
            --radius-sm: 12px;
            --radius-md: 16px;
            --radius-lg: 24px;
            --radius-xl: 32px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ–Ω */
        .bg-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        .bg-orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.5;
            animation: float 20s ease-in-out infinite;
        }

        .bg-orb-1 {
            width: 300px;
            height: 300px;
            background: var(--accent-purple);
            top: -100px;
            left: -100px;
            animation-delay: 0s;
        }

        .bg-orb-2 {
            width: 400px;
            height: 400px;
            background: var(--accent-pink);
            bottom: -150px;
            right: -150px;
            animation-delay: -5s;
        }

        .bg-orb-3 {
            width: 200px;
            height: 200px;
            background: var(--accent-cyan);
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            animation-delay: -10s;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) scale(1); }
            25% { transform: translate(30px, -30px) scale(1.1); }
            50% { transform: translate(-20px, 20px) scale(0.9); }
            75% { transform: translate(20px, 30px) scale(1.05); }
        }

        /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è */
        .app-container {
            max-width: 100%;
            min-height: 100vh;
            padding: 16px;
            padding-bottom: 100px;
        }

        /* –•–µ–¥–µ—Ä */
        .header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px 0;
            margin-bottom: 24px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-icon {
            width: 48px;
            height: 48px;
            background: var(--gradient-primary);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            box-shadow: var(--shadow-glow);
        }

        .logo-text {
            font-size: 24px;
            font-weight: 700;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .user-avatar {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: var(--gradient-card);
            border: 2px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .user-avatar:hover {
            transform: scale(1.1);
            border-color: var(--accent-purple);
        }

        /* –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ */
        .welcome-section {
            text-align: center;
            margin-bottom: 32px;
        }

        .welcome-title {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .welcome-subtitle {
            color: var(--text-secondary);
            font-size: 15px;
        }

        .zodiac-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-color);
            padding: 10px 20px;
            border-radius: 50px;
            margin-top: 16px;
            font-size: 14px;
        }

        .zodiac-badge span {
            font-size: 20px;
        }

        /* –ö–∞—Ä—Ç–æ—á–∫–∏ */
        .card {
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 20px;
            margin-bottom: 16px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
        }

        .card:active {
            transform: scale(0.98);
        }

        .card-glow {
            box-shadow: var(--shadow-glow);
        }

        /* –°–µ—Ç–∫–∞ —Ñ—É–Ω–∫—Ü–∏–π */
        .features-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 24px;
        }

        .feature-card {
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .feature-card::before {
            content: '';
            position: absolute;
            inset: 0;
            background: var(--gradient-card);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .feature-card:hover::before,
        .feature-card:active::before {
            opacity: 1;
        }

        .feature-card:active {
            transform: scale(0.95);
        }

        .feature-icon {
            width: 56px;
            height: 56px;
            margin: 0 auto 12px;
            background: var(--gradient-primary);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            position: relative;
            z-index: 1;
        }

        .feature-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 4px;
            position: relative;
            z-index: 1;
        }

        .feature-desc {
            font-size: 12px;
            color: var(--text-muted);
            position: relative;
            z-index: 1;
        }

        /* –ë–æ–ª—å—à–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –¥–Ω—è */
        .daily-card {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2) 0%, rgba(236, 72, 153, 0.2) 100%);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: var(--radius-xl);
            padding: 24px;
            margin-bottom: 24px;
            position: relative;
            overflow: hidden;
        }

        .daily-card::after {
            content: '‚ú®';
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 40px;
            opacity: 0.3;
        }

        .daily-label {
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--accent-purple);
            margin-bottom: 8px;
        }

        .daily-title {
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 12px;
        }

        .daily-text {
            color: var(--text-secondary);
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: 16px;
        }

        .daily-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: var(--gradient-primary);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 50px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .daily-btn:active {
            transform: scale(0.95);
        }

        /* –õ—É–Ω–Ω—ã–π –≤–∏–¥–∂–µ—Ç */
        .moon-widget {
            display: flex;
            align-items: center;
            gap: 16px;
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 16px;
            margin-bottom: 24px;
        }

        .moon-icon {
            font-size: 48px;
            animation: pulse 3s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.05); }
        }

        .moon-info {
            flex: 1;
        }

        .moon-day {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .moon-phase {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .moon-energy {
            display: flex;
            gap: 4px;
            margin-top: 8px;
        }

        .energy-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--accent-gold);
        }

        .energy-dot.inactive {
            background: var(--border-color);
        }

        /* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            z-index: 1000;
            display: none;
            align-items: flex-end;
            justify-content: center;
            padding: 16px;
        }

        .modal-overlay.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal {
            width: 100%;
            max-width: 500px;
            max-height: 85vh;
            background: var(--bg-secondary);
            border-radius: var(--radius-xl) var(--radius-xl) 0 0;
            overflow: hidden;
            animation: slideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }

        .modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 20px 24px;
            border-bottom: 1px solid var(--border-color);
        }

        .modal-title {
            font-size: 18px;
            font-weight: 600;
        }

        .modal-close {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--bg-glass);
            border: none;
            color: var(--text-primary);
            font-size: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            padding: 24px;
            overflow-y: auto;
            max-height: calc(85vh - 80px);
        }

        /* –¢–∞—Ä–æ –∫–∞—Ä—Ç—ã */
        .tarot-cards {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin: 24px 0;
            perspective: 1000px;
        }

        .tarot-card {
            width: 100px;
            height: 160px;
            background: linear-gradient(180deg, #1a1a2e 0%, #0f0f1a 100%);
            border: 2px solid var(--accent-purple);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            transform-style: preserve-3d;
            position: relative;
        }

        .tarot-card::before {
            content: 'üé¥';
            position: absolute;
            backface-visibility: hidden;
        }

        .tarot-card.revealed::before {
            content: attr(data-card);
            animation: reveal 0.6s ease forwards;
        }

        @keyframes reveal {
            0% { transform: rotateY(180deg); }
            100% { transform: rotateY(0); }
        }

        .tarot-card:hover {
            transform: translateY(-10px) rotateX(5deg);
            box-shadow: 0 20px 40px rgba(139, 92, 246, 0.3);
        }

        .tarot-card.selected {
            border-color: var(--accent-gold);
            box-shadow: 0 0 30px rgba(245, 158, 11, 0.5);
        }

        /* –†–∞—Å–∫–ª–∞–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç */
        .reading-result {
            background: var(--bg-glass);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 20px;
            margin-top: 20px;
        }

        .reading-card-name {
            font-size: 16px;
            font-weight: 600;
            color: var(--accent-purple);
            margin-bottom: 8px;
        }

        .reading-interpretation {
            font-size: 14px;
            color: var(--text-secondary);
            line-height: 1.7;
        }

        /* –ö–Ω–æ–ø–∫–∏ */
        .btn {
            width: 100%;
            padding: 16px;
            border-radius: var(--radius-md);
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .btn-primary {
            background: var(--gradient-primary);
            color: white;
        }

        .btn-primary:active {
            transform: scale(0.98);
            opacity: 0.9;
        }

        .btn-secondary {
            background: var(--bg-glass);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }

        .btn-glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(10, 10, 15, 0.9);
            backdrop-filter: blur(20px);
            border-top: 1px solid var(--border-color);
            padding: 12px 16px;
            padding-bottom: calc(12px + env(safe-area-inset-bottom));
            display: flex;
            justify-content: space-around;
            z-index: 100;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            color: var(--text-muted);
            text-decoration: none;
            font-size: 10px;
            transition: all 0.3s ease;
            cursor: pointer;
            padding: 8px 16px;
            border-radius: var(--radius-md);
        }

        .nav-item.active {
            color: var(--accent-purple);
        }

        .nav-item.active .nav-icon {
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .nav-icon {
            font-size: 24px;
        }

        /* –ü–æ–¥–ø–∏—Å–∫–∞ */
        .subscription-card {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.2) 0%, rgba(236, 72, 153, 0.2) 100%);
            border: 1px solid rgba(245, 158, 11, 0.3);
            border-radius: var(--radius-xl);
            padding: 24px;
            text-align: center;
            margin-top: 24px;
        }

        .sub-crown {
            font-size: 48px;
            margin-bottom: 12px;
        }

        .sub-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .sub-features {
            text-align: left;
            margin: 16px 0;
        }

        .sub-feature {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 0;
            font-size: 14px;
            color: var(--text-secondary);
        }

        .sub-feature::before {
            content: '‚úì';
            color: var(--accent-gold);
            font-weight: bold;
        }

        .sub-price {
            font-size: 32px;
            font-weight: 700;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .sub-period {
            color: var(--text-muted);
            font-size: 14px;
        }

        /* –ü—Ä–æ—Ñ–∏–ª—å */
        .profile-header {
            text-align: center;
            padding: 24px 0;
        }

        .profile-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: var(--gradient-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            margin: 0 auto 16px;
            border: 3px solid var(--border-color);
        }

        .profile-name {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .profile-zodiac {
            color: var(--accent-purple);
            font-size: 16px;
        }

        .profile-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-top: 24px;
        }

        .stat-card {
            background: var(--bg-glass);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            padding: 16px;
            text-align: center;
        }

        .stat-value {
            font-size: 24px;
            font-weight: 700;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .stat-label {
            font-size: 12px;
            color: var(--text-muted);
            margin-top: 4px;
        }

        /* –°—Ç—Ä–∞–Ω–∏—Ü—ã */
        .page {
            display: none;
        }

        .page.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        /* –õ–æ–∞–¥–µ—Ä */
        .loader {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 40px;
        }

        .loader-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid var(--border-color);
            border-top-color: var(--accent-purple);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Skeleton loading */
        .skeleton {
            background: linear-gradient(90deg, var(--bg-glass) 25%, rgba(255,255,255,0.1) 50%, var(--bg-glass) 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
            border-radius: var(--radius-sm);
        }

        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }

        /* Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
        .toast {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%) translateY(-100px);
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            padding: 12px 24px;
            border-radius: 50px;
            font-size: 14px;
            z-index: 2000;
            transition: transform 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .toast.show {
            transform: translateX(-50%) translateY(0);
        }

        .toast.success {
            border-color: #10b981;
        }

        .toast.error {
            border-color: #ef4444;
        }

        /* –ì–æ—Ä–æ—Å–∫–æ–ø —Å—Ç—Ä–∞–Ω–∏—Ü–∞ */
        .horoscope-header {
            text-align: center;
            padding: 20px 0;
        }

        .horoscope-sign {
            font-size: 64px;
            margin-bottom: 8px;
        }

        .horoscope-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            overflow-x: auto;
            padding: 4px 0;
        }

        .horoscope-tab {
            flex-shrink: 0;
            padding: 10px 20px;
            background: var(--bg-glass);
            border: 1px solid var(--border-color);
            border-radius: 50px;
            font-size: 13px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .horoscope-tab.active {
            background: var(--gradient-primary);
            color: white;
            border-color: transparent;
        }

        .horoscope-content {
            background: var(--bg-glass);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 20px;
        }

        .horoscope-section {
            margin-bottom: 20px;
        }

        .horoscope-section-title {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--accent-purple);
        }

        .horoscope-text {
            font-size: 14px;
            line-height: 1.7;
            color: var(--text-secondary);
        }

        /* –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å */
        .compat-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            margin: 20px 0;
        }

        .compat-sign {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            background: var(--bg-glass);
            border: 2px solid var(--border-color);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .compat-sign.selected {
            border-color: var(--accent-purple);
            background: var(--gradient-card);
        }

        .compat-result {
            text-align: center;
            padding: 24px;
        }

        .compat-score {
            font-size: 64px;
            font-weight: 700;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .compat-bar {
            height: 8px;
            background: var(--bg-glass);
            border-radius: 4px;
            margin: 16px 0;
            overflow: hidden;
        }

        .compat-bar-fill {
            height: 100%;
            background: var(--gradient-primary);
            border-radius: 4px;
            transition: width 1s ease;
        }
    </style>
</head>
<body>
    <!-- –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ–Ω -->
    <div class="bg-animation">
        <div class="bg-orb bg-orb-1"></div>
        <div class="bg-orb bg-orb-2"></div>
        <div class="bg-orb bg-orb-3"></div>
    </div>

    <!-- Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
    <div class="toast" id="toast">
        <span id="toastIcon">‚ú®</span>
        <span id="toastText">–°–æ–æ–±—â–µ–Ω–∏–µ</span>
    </div>

    <div class="app-container">
        <!-- ============ –ì–õ–ê–í–ù–ê–Ø –°–¢–†–ê–ù–ò–¶–ê ============ -->
        <div class="page active" id="page-home">
            <!-- –•–µ–¥–µ—Ä -->
            <header class="header">
                <div class="logo">
                    <div class="logo-icon">üîÆ</div>
                    <span class="logo-text">Astro AI</span>
                </div>
                <div class="user-avatar" onclick="showPage('profile')">
                    <span id="userEmoji">üë§</span>
                </div>
            </header>

            <!-- –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ -->
            <section class="welcome-section">
                <h1 class="welcome-title">–ü—Ä–∏–≤–µ—Ç, <span id="userName">–ü—É—Ç–Ω–∏–∫</span>!</h1>
                <p class="welcome-subtitle">–ó–≤—ë–∑–¥—ã –ø—Ä–∏–≥–æ—Ç–æ–≤–∏–ª–∏ –¥–ª—è —Ç–µ–±—è –ø–æ—Å–ª–∞–Ω–∏–µ</p>
                <div class="zodiac-badge" id="zodiacBadge" style="display: none;">
                    <span id="zodiacEmoji">‚ôà</span>
                    <span id="zodiacName">–û–≤–µ–Ω</span>
                </div>
            </section>

            <!-- –õ—É–Ω–Ω—ã–π –≤–∏–¥–∂–µ—Ç -->
            <div class="moon-widget" onclick="showPage('moon')">
                <div class="moon-icon" id="moonEmoji">üåô</div>
                <div class="moon-info">
                    <div class="moon-day" id="moonDay">12 –ª—É–Ω–Ω—ã–π –¥–µ–Ω—å</div>
                    <div class="moon-phase" id="moonPhase">–†–∞—Å—Ç—É—â–∞—è –ª—É–Ω–∞ ‚Ä¢ –î–µ–≤–∞</div>
                    <div class="moon-energy" id="moonEnergy">
                        <div class="energy-dot"></div>
                        <div class="energy-dot"></div>
                        <div class="energy-dot"></div>
                        <div class="energy-dot"></div>
                        <div class="energy-dot inactive"></div>
                    </div>
                </div>
                <span style="color: var(--text-muted);">‚Üí</span>
            </div>

            <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –¥–Ω—è -->
            <div class="daily-card" onclick="openTarotModal()">
                <div class="daily-label">–ö–∞—Ä—Ç–∞ –¥–Ω—è</div>
                <div class="daily-title">–£–∑–Ω–∞–π —Å–≤–æ—ë –ø–æ—Å–ª–∞–Ω–∏–µ ‚ú®</div>
                <div class="daily-text">–í—ã—Ç—è–Ω–∏ –∫–∞—Ä—Ç—É –∏ –ø–æ–ª—É—á–∏ —Å–æ–≤–µ—Ç –æ—Ç –í—Å–µ–ª–µ–Ω–Ω–æ–π –Ω–∞ —Å–µ–≥–æ–¥–Ω—è</div>
                <button class="daily-btn">
                    üé¥ –í—ã—Ç—è–Ω—É—Ç—å –∫–∞—Ä—Ç—É
                </button>
            </div>

            <!-- –°–µ—Ç–∫–∞ —Ñ—É–Ω–∫—Ü–∏–π -->
            <div class="features-grid">
                <div class="feature-card" onclick="showPage('tarot')">
                    <div class="feature-icon">üé¥</div>
                    <div class="feature-title">–¢–∞—Ä–æ</div>
                    <div class="feature-desc">–†–∞—Å–∫–ª–∞–¥—ã</div>
                </div>
                <div class="feature-card" onclick="showPage('horoscope')">
                    <div class="feature-icon">‚≠ê</div>
                    <div class="feature-title">–ì–æ—Ä–æ—Å–∫–æ–ø</div>
                    <div class="feature-desc">–ù–∞ —Å–µ–≥–æ–¥–Ω—è</div>
                </div>
                <div class="feature-card" onclick="showPage('compatibility')">
                    <div class="feature-icon">üíï</div>
                    <div class="feature-title">–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å</div>
                    <div class="feature-desc">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</div>
                </div>
                <div class="feature-card" onclick="showPage('premium')">
                    <div class="feature-icon">üëë</div>
                    <div class="feature-title">–ü—Ä–µ–º–∏—É–º</div>
                    <div class="feature-desc">–ë–µ–∑–ª–∏–º–∏—Ç</div>
                </div>
            </div>

            <!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                    <span style="font-weight: 600;">‚ö° –ë—ã—Å—Ç—Ä—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏</span>
                </div>
                <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                    <button class="btn btn-glass" style="flex: 1; min-width: 140px;" onclick="showPage('money')">
                        üí∞ –î–µ–Ω—å–≥–∏
                    </button>
                    <button class="btn btn-glass" style="flex: 1; min-width: 140px;" onclick="showPage('karma')">
                        üîÆ –ö–∞—Ä–º–∞
                    </button>
                </div>
            </div>
        </div>

        <!-- ============ –°–¢–†–ê–ù–ò–¶–ê –¢–ê–†–û ============ -->
        <div class="page" id="page-tarot">
            <header class="header">
                <div style="display: flex; align-items: center; gap: 12px;">
                    <button onclick="showPage('home')" style="background: none; border: none; color: white; font-size: 20px; cursor: pointer;">‚Üê</button>
                    <span style="font-size: 18px; font-weight: 600;">üé¥ –†–∞—Å–∫–ª–∞–¥—ã –¢–∞—Ä–æ</span>
                </div>
            </header>

            <div class="card" onclick="openTarotModal('one')">
                <div style="display: flex; align-items: center; gap: 16px;">
                    <span style="font-size: 32px;">üé¥</span>
                    <div>
                        <div style="font-weight: 600;">–ö–∞—Ä—Ç–∞ –¥–Ω—è</div>
                        <div style="color: var(--text-muted); font-size: 13px;">–û–¥–Ω–∞ –∫–∞—Ä—Ç–∞ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è</div>
                    </div>
                </div>
            </div>

            <div class="card" onclick="openTarotModal('three')">
                <div style="display: flex; align-items: center; gap: 16px;">
                    <span style="font-size: 32px;">üîÆ</span>
                    <div>
                        <div style="font-weight: 600;">3 –∫–∞—Ä—Ç—ã</div>
                        <div style="color: var(--text-muted); font-size: 13px;">–ü—Ä–æ—à–ª–æ–µ ‚Ä¢ –ù–∞—Å—Ç–æ—è—â–µ–µ ‚Ä¢ –ë—É–¥—É—â–µ–µ</div>
                    </div>
                </div>
            </div>

            <div class="card" onclick="openTarotModal('love')">
                <div style="display: flex; align-items: center; gap: 16px;">
                    <span style="font-size: 32px;">üíï</span>
                    <div>
                        <div style="font-weight: 600;">–ù–∞ –æ—Ç–Ω–æ—à–µ–Ω–∏—è</div>
                        <div style="color: var(--text-muted); font-size: 13px;">–ê–Ω–∞–ª–∏–∑ –ª—é–±–æ–≤–Ω–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏</div>
                    </div>
                </div>
            </div>

            <div class="card" onclick="openTarotModal('yesno')">
                <div style="display: flex; align-items: center; gap: 16px;">
                    <span style="font-size: 32px;">‚ùì</span>
                    <div>
                        <div style="font-weight: 600;">–î–∞ / –ù–µ—Ç</div>
                        <div style="color: var(--text-muted); font-size: 13px;">–ë—ã—Å—Ç—Ä—ã–π –æ—Ç–≤–µ—Ç</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ============ –°–¢–†–ê–ù–ò–¶–ê –ì–û–†–û–°–ö–û–ü ============ -->
        <div class="page" id="page-horoscope">
            <header class="header">
                <div style="display: flex; align-items: center; gap: 12px;">
                    <button onclick="showPage('home')" style="background: none; border: none; color: white; font-size: 20px; cursor: pointer;">‚Üê</button>
                    <span style="font-size: 18px; font-weight: 600;">‚≠ê –ì–æ—Ä–æ—Å–∫–æ–ø</span>
                </div>
            </header>

            <div class="horoscope-header">
                <div class="horoscope-sign" id="horoSign">‚ôà</div>
                <div style="font-size: 24px; font-weight: 700;" id="horoSignName">–û–≤–µ–Ω</div>
            </div>

            <div class="horoscope-tabs">
                <div class="horoscope-tab active" onclick="loadHoroscope('today')">–°–µ–≥–æ–¥–Ω—è</div>
                <div class="horoscope-tab" onclick="loadHoroscope('tomorrow')">–ó–∞–≤—Ç—Ä–∞</div>
                <div class="horoscope-tab" onclick="loadHoroscope('week')">–ù–µ–¥–µ–ª—è</div>
                <div class="horoscope-tab" onclick="loadHoroscope('love')">–õ—é–±–æ–≤—å</div>
                <div class="horoscope-tab" onclick="loadHoroscope('money')">–î–µ–Ω—å–≥–∏</div>
            </div>

            <div class="horoscope-content" id="horoscopeContent">
                <div class="horoscope-section">
                    <div class="horoscope-section-title">üåü –û–±—â–∏–π –ø—Ä–æ–≥–Ω–æ–∑</div>
                    <div class="horoscope-text" id="horoText">
                        –°–µ–≥–æ–¥–Ω—è –∑–≤—ë–∑–¥—ã –±–ª–∞–≥–æ–≤–æ–ª—è—Ç –Ω–æ–≤—ã–º –Ω–∞—á–∏–Ω–∞–Ω–∏—è–º. –≠–Ω–µ—Ä–≥–∏—è –¥–Ω—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –∏ –≤–∞–∂–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è...
                    </div>
                </div>
                <div class="horoscope-section">
                    <div class="horoscope-section-title">üíï –õ—é–±–æ–≤—å</div>
                    <div class="horoscope-text">–†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è –Ω–∞ –ø–æ–¥—ä—ë–º–µ...</div>
                </div>
                <div class="horoscope-section">
                    <div class="horoscope-section-title">üíº –ö–∞—Ä—å–µ—Ä–∞</div>
                    <div class="horoscope-text">–ë–ª–∞–≥–æ–ø—Ä–∏—è—Ç–Ω—ã–π –ø–µ—Ä–∏–æ–¥ –¥–ª—è –¥–µ–ª–æ–≤—ã—Ö –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–æ–≤...</div>
                </div>
            </div>
        </div>

        <!-- ============ –°–¢–†–ê–ù–ò–¶–ê –°–û–í–ú–ï–°–¢–ò–ú–û–°–¢–¨ ============ -->
        <div class="page" id="page-compatibility">
            <header class="header">
                <div style="display: flex; align-items: center; gap: 12px;">
                    <button onclick="showPage('home')" style="background: none; border: none; color: white; font-size: 20px; cursor: pointer;">‚Üê</button>
                    <span style="font-size: 18px; font-weight: 600;">üíï –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å</span>
                </div>
            </header>

            <div style="text-align: center; margin-bottom: 16px;">
                <p style="color: var(--text-secondary);">–í—ã–±–µ—Ä–∏ –∑–Ω–∞–∫ –ø–∞—Ä—Ç–Ω—ë—Ä–∞</p>
            </div>

            <div class="compat-grid" id="compatGrid">
                <div class="compat-sign" onclick="selectSign(this, 'aries')">‚ôà</div>
                <div class="compat-sign" onclick="selectSign(this, 'taurus')">‚ôâ</div>
                <div class="compat-sign" onclick="selectSign(this, 'gemini')">‚ôä</div>
                <div class="compat-sign" onclick="selectSign(this, 'cancer')">‚ôã</div>
                <div class="compat-sign" onclick="selectSign(this, 'leo')">‚ôå</div>
                <div class="compat-sign" onclick="selectSign(this, 'virgo')">‚ôç</div>
                <div class="compat-sign" onclick="selectSign(this, 'libra')">‚ôé</div>
                <div class="compat-sign" onclick="selectSign(this, 'scorpio')">‚ôè</div>
                <div class="compat-sign" onclick="selectSign(this, 'sagittarius')">‚ôê</div>
                <div class="compat-sign" onclick="selectSign(this, 'capricorn')">‚ôë</div>
                <div class="compat-sign" onclick="selectSign(this, 'aquarius')">‚ôí</div>
                <div class="compat-sign" onclick="selectSign(this, 'pisces')">‚ôì</div>
            </div>

            <div id="compatResult" style="display: none;">
                <div class="compat-result">
                    <div id="compatPair" style="font-size: 40px; margin-bottom: 8px;">‚ôà + ‚ôå</div>
                    <div class="compat-score" id="compatScore">85%</div>
                    <div class="compat-bar">
                        <div class="compat-bar-fill" id="compatBar" style="width: 85%;"></div>
                    </div>
                </div>
                <div class="card">
                    <div style="font-weight: 600; margin-bottom: 12px;">üí´ –ê–Ω–∞–ª–∏–∑ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏</div>
                    <div style="color: var(--text-secondary); line-height: 1.7;" id="compatText">
                        –û—Ç–ª–∏—á–Ω–∞—è –ø–∞—Ä–∞! –û–≥–Ω–µ–Ω–Ω—ã–µ –∑–Ω–∞–∫–∏ –ø–æ–Ω–∏–º–∞—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞...
                    </div>
                </div>
            </div>
        </div>

        <!-- ============ –°–¢–†–ê–ù–ò–¶–ê –õ–£–ù–ê ============ -->
        <div class="page" id="page-moon">
            <header class="header">
                <div style="display: flex; align-items: center; gap: 12px;">
                    <button onclick="showPage('home')" style="background: none; border: none; color: white; font-size: 20px; cursor: pointer;">‚Üê</button>
                    <span style="font-size: 18px; font-weight: 600;">üåô –õ—É–Ω–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å</span>
                </div>
            </header>

            <div style="text-align: center; padding: 24px 0;">
                <div style="font-size: 80px;" id="moonBigEmoji">üåî</div>
                <div style="font-size: 28px; font-weight: 700; margin-top: 8px;" id="moonBigDay">12 –ª—É–Ω–Ω—ã–π –¥–µ–Ω—å</div>
                <div style="color: var(--text-secondary);" id="moonBigPhase">–†–∞—Å—Ç—É—â–∞—è –ª—É–Ω–∞ –≤ –î–µ–≤–µ</div>
            </div>

            <div class="card">
                <div style="font-weight: 600; margin-bottom: 12px; color: var(--accent-gold);">‚ú® –ë–ª–∞–≥–æ–ø—Ä–∏—è—Ç–Ω–æ</div>
                <div style="color: var(--text-secondary); line-height: 1.7;" id="moonGood">
                    ‚Ä¢ –ù–∞—á–∏–Ω–∞—Ç—å –Ω–æ–≤—ã–µ –ø—Ä–æ–µ–∫—Ç—ã<br>
                    ‚Ä¢ –°—Ç—Ä–∏—á—å –≤–æ–ª–æ—Å—ã –¥–ª—è —Ä–æ—Å—Ç–∞<br>
                    ‚Ä¢ –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
                </div>
            </div>

            <div class="card">
                <div style="font-weight: 600; margin-bottom: 12px; color: #ef4444;">‚ö†Ô∏è –ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è</div>
                <div style="color: var(--text-secondary); line-height: 1.7;" id="moonBad">
                    ‚Ä¢ –í–∞–∂–Ω—ã–µ –ø–µ—Ä–µ–≥–æ–≤–æ—Ä—ã<br>
                    ‚Ä¢ –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã
                </div>
            </div>

            <div class="card">
                <div style="font-weight: 600; margin-bottom: 12px;">üíÑ –ö–∞–ª–µ–Ω–¥–∞—Ä—å –∫—Ä–∞—Å–æ—Ç—ã</div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                    <div style="padding: 12px; background: var(--bg-glass); border-radius: var(--radius-sm);">
                        <div style="font-size: 20px;">‚úÇÔ∏è</div>
                        <div style="font-size: 12px; color: var(--text-muted);">–°—Ç—Ä–∏–∂–∫–∞</div>
                        <div style="color: #10b981; font-weight: 600;">–û—Ç–ª–∏—á–Ω–æ</div>
                    </div>
                    <div style="padding: 12px; background: var(--bg-glass); border-radius: var(--radius-sm);">
                        <div style="font-size: 20px;">üíÖ</div>
                        <div style="font-size: 12px; color: var(--text-muted);">–ú–∞–Ω–∏–∫—é—Ä</div>
                        <div style="color: var(--accent-gold); font-weight: 600;">–•–æ—Ä–æ—à–æ</div>
                    </div>
                    <div style="padding: 12px; background: var(--bg-glass); border-radius: var(--radius-sm);">
                        <div style="font-size: 20px;">üé®</div>
                        <div style="font-size: 12px; color: var(--text-muted);">–û–∫—Ä–∞—à–∏–≤–∞–Ω–∏–µ</div>
                        <div style="color: #ef4444; font-weight: 600;">–ù–µ—Ç</div>
                    </div>
                    <div style="padding: 12px; background: var(--bg-glass); border-radius: var(--radius-sm);">
                        <div style="font-size: 20px;">üíÜ</div>
                        <div style="font-size: 12px; color: var(--text-muted);">–ö–æ—Å–º–µ—Ç–æ–ª–æ–≥</div>
                        <div style="color: #10b981; font-weight: 600;">–û—Ç–ª–∏—á–Ω–æ</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ============ –°–¢–†–ê–ù–ò–¶–ê –ü–†–û–§–ò–õ–¨ ============ -->
        <div class="page" id="page-profile">
            <header class="header">
                <div style="display: flex; align-items: center; gap: 12px;">
                    <button onclick="showPage('home')" style="background: none; border: none; color: white; font-size: 20px; cursor: pointer;">‚Üê</button>
                    <span style="font-size: 18px; font-weight: 600;">üë§ –ü—Ä–æ—Ñ–∏–ª—å</span>
                </div>
            </header>

            <div class="profile-header">
                <div class="profile-avatar" id="profileAvatar">üë§</div>
                <div class="profile-name" id="profileName">–ü—É—Ç–Ω–∏–∫</div>
                <div class="profile-zodiac" id="profileZodiac">‚ôà –û–≤–µ–Ω</div>
            </div>

            <div class="profile-stats">
                <div class="stat-card">
                    <div class="stat-value" id="statReadings">0</div>
                    <div class="stat-label">–†–∞—Å–∫–ª–∞–¥–æ–≤</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="statReferrals">0</div>
                    <div class="stat-label">–î—Ä—É–∑–µ–π</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="statDays">0</div>
                    <div class="stat-label">–ë–æ–Ω—É—Å –¥–Ω–µ–π</div>
                </div>
            </div>

            <div class="card" style="margin-top: 24px;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <div style="font-weight: 600;">‚≠ê –ü–æ–¥–ø–∏—Å–∫–∞</div>
                        <div style="color: var(--text-muted); font-size: 13px;" id="subStatus">–ù–µ –∞–∫—Ç–∏–≤–Ω–∞</div>
                    </div>
                    <button class="btn btn-primary" style="width: auto; padding: 10px 20px;" onclick="showPage('premium')">
                        –û—Ñ–æ—Ä–º–∏—Ç—å
                    </button>
                </div>
            </div>

            <div class="card">
                <div style="font-weight: 600; margin-bottom: 12px;">üë• –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–≥–∞</div>
                <div style="color: var(--text-secondary); font-size: 13px; margin-bottom: 12px;">
                    –ü–æ–ª—É—á–∏ +1 –¥–µ–Ω—å –ø–æ–¥–ø–∏—Å–∫–∏ –∑–∞ –∫–∞–∂–¥–æ–≥–æ –¥—Ä—É–≥–∞!
                </div>
                <button class="btn btn-glass" onclick="shareReferral()">
                    üì§ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Å—Å—ã–ª–∫–æ–π
                </button>
            </div>
        </div>

        <!-- ============ –°–¢–†–ê–ù–ò–¶–ê –ü–†–ï–ú–ò–£–ú ============ -->
        <div class="page" id="page-premium">
            <header class="header">
                <div style="display: flex; align-items: center; gap: 12px;">
                    <button onclick="showPage('home')" style="background: none; border: none; color: white; font-size: 20px; cursor: pointer;">‚Üê</button>
                    <span style="font-size: 18px; font-weight: 600;">üëë –ü—Ä–µ–º–∏—É–º</span>
                </div>
            </header>

            <div class="subscription-card">
                <div class="sub-crown">üëë</div>
                <div class="sub-title">Astro AI Premium</div>
                <div class="sub-features">
                    <div class="sub-feature">–ë–µ–∑–ª–∏–º–∏—Ç–Ω—ã–µ —Ä–∞—Å–∫–ª–∞–¥—ã –¢–∞—Ä–æ</div>
                    <div class="sub-feature">–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –≥–æ—Ä–æ—Å–∫–æ–ø</div>
                    <div class="sub-feature">–î–µ–Ω–µ–∂–Ω—ã–π –ø—Ä–æ–≥–Ω–æ–∑</div>
                    <div class="sub-feature">–ö–∞—Ä–º–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑</div>
                    <div class="sub-feature">–°–∏–Ω–∞—Å—Ç—Ä–∏—è –ø–æ —Ñ–æ—Ç–æ</div>
                    <div class="sub-feature">–ê—Å—Ç—Ä–æ-–±—É–¥–∏–ª—å–Ω–∏–∫</div>
                    <div class="sub-feature">–†–µ—Ç—Ä–æ–≥—Ä–∞–¥–Ω—ã–µ –∞–ª–µ—Ä—Ç—ã</div>
                </div>
                <div class="sub-price">490 ‚ÇΩ</div>
                <div class="sub-period">–≤ –º–µ—Å—è—Ü</div>
            </div>

            <button class="btn btn-primary" style="margin-top: 24px;" onclick="buyPremium('rub')">
                üí≥ –û–ø–ª–∞—Ç–∏—Ç—å –∫–∞—Ä—Ç–æ–π
            </button>

            <button class="btn btn-secondary" style="margin-top: 12px;" onclick="buyPremium('stars')">
                ‚≠ê –û–ø–ª–∞—Ç–∏—Ç—å 250 Stars
            </button>
        </div>

        <!-- ============ –°–¢–†–ê–ù–ò–¶–ê –î–ï–ù–¨–ì–ò ============ -->
        <div class="page" id="page-money">
            <header class="header">
                <div style="display: flex; align-items: center; gap: 12px;">
                    <button onclick="showPage('home')" style="background: none; border: none; color: white; font-size: 20px; cursor: pointer;">‚Üê</button>
                    <span style="font-size: 18px; font-weight: 600;">üí∞ –î–µ–Ω–µ–∂–Ω—ã–π –ø—Ä–æ–≥–Ω–æ–∑</span>
                </div>
            </header>

            <div style="text-align: center; padding: 24px 0;">
                <div style="font-size: 64px;">üí∞</div>
                <div style="font-size: 20px; font-weight: 600; margin-top: 8px;">–§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –Ω–µ–¥–µ–ª—è</div>
            </div>

            <div class="card" id="moneyContent">
                <div class="loader">
                    <div class="loader-spinner"></div>
                </div>
            </div>
        </div>

        <!-- ============ –°–¢–†–ê–ù–ò–¶–ê –ö–ê–†–ú–ê ============ -->
        <div class="page" id="page-karma">
            <header class="header">
                <div style="display: flex; align-items: center; gap: 12px;">
                    <button onclick="showPage('home')" style="background: none; border: none; color: white; font-size: 20px; cursor: pointer;">‚Üê</button>
                    <span style="font-size: 18px; font-weight: 600;">üîÆ –ö–∞—Ä–º–∏—á–µ—Å–∫–∏–π —Ä–∞–∑–±–æ—Ä</span>
                </div>
            </header>

            <div style="text-align: center; padding: 24px 0;">
                <div style="font-size: 64px;">üîÆ</div>
                <div style="font-size: 20px; font-weight: 600; margin-top: 8px;">–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ—à–ª—ã—Ö –∂–∏–∑–Ω–µ–π</div>
            </div>

            <div class="card" id="karmaContent">
                <div class="loader">
                    <div class="loader-spinner"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="bottom-nav">
        <div class="nav-item active" onclick="showPage('home')" id="nav-home">
            <span class="nav-icon">üè†</span>
            <span>–ì–ª–∞–≤–Ω–∞—è</span>
        </div>
        <div class="nav-item" onclick="showPage('tarot')" id="nav-tarot">
            <span class="nav-icon">üé¥</span>
            <span>–¢–∞—Ä–æ</span>
        </div>
        <div class="nav-item" onclick="showPage('horoscope')" id="nav-horoscope">
            <span class="nav-icon">‚≠ê</span>
            <span>–ì–æ—Ä–æ—Å–∫–æ–ø</span>
        </div>
        <div class="nav-item" onclick="showPage('moon')" id="nav-moon">
            <span class="nav-icon">üåô</span>
            <span>–õ—É–Ω–∞</span>
        </div>
        <div class="nav-item" onclick="showPage('profile')" id="nav-profile">
            <span class="nav-icon">üë§</span>
            <span>–ü—Ä–æ—Ñ–∏–ª—å</span>
        </div>
    </nav>

    <!-- ============ –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –¢–ê–†–û ============ -->
    <div class="modal-overlay" id="tarotModal">
        <div class="modal">
            <div class="modal-header">
                <span class="modal-title">üé¥ –†–∞—Å–∫–ª–∞–¥ –¢–∞—Ä–æ</span>
                <button class="modal-close" onclick="closeTarotModal()">‚úï</button>
            </div>
            <div class="modal-content">
                <div style="text-align: center; margin-bottom: 20px;">
                    <p style="color: var(--text-secondary);" id="tarotInstruction">–í—ã–±–µ—Ä–∏ –∫–∞—Ä—Ç—É</p>
                </div>

                <div class="tarot-cards" id="tarotCards">
                    <div class="tarot-card" onclick="selectTarotCard(this, 0)"></div>
                    <div class="tarot-card" onclick="selectTarotCard(this, 1)"></div>
                    <div class="tarot-card" onclick="selectTarotCard(this, 2)"></div>
                </div>

                <div id="tarotResult" style="display: none;">
                    <div class="reading-result">
                        <div class="reading-card-name" id="cardName">–ú–∞–≥</div>
                        <div class="reading-interpretation" id="cardInterpretation">
                            –ö–∞—Ä—Ç–∞ –ú–∞–≥ —Å–∏–º–≤–æ–ª–∏–∑–∏—Ä—É–µ—Ç —Å–∏–ª—É –≤–æ–ª–∏, —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ –∏ –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ...
                        </div>
                    </div>
                </div>

                <button class="btn btn-primary" id="tarotBtn" style="margin-top: 20px;" onclick="doTarotReading()">
                    üîÆ –ü–æ–ª—É—á–∏—Ç—å —Ä–∞—Å–∫–ª–∞–¥
                </button>
            </div>
        </div>
    </div>

    <script>
        // ==================== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ====================
        
        const tg = window.Telegram?.WebApp;
        
        // –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        let userData = {
            id: null,
            name: '–ü—É—Ç–Ω–∏–∫',
            zodiac: null,
            zodiacEmoji: null,
            subscription: false,
            readings: 0,
            referrals: 0,
            bonusDays: 0
        };

        // API URL (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à)
        const API_URL = window.location.origin + '/api';

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', () => {
            initApp();
        });

        async function initApp() {
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram WebApp
            if (tg) {
                tg.ready();
                tg.expand();
                
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ü–≤–µ—Ç–∞
                tg.setHeaderColor('#0a0a0f');
                tg.setBackgroundColor('#0a0a0f');
                
                // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                if (tg.initDataUnsafe?.user) {
                    const user = tg.initDataUnsafe.user;
                    userData.id = user.id;
                    userData.name = user.first_name || '–ü—É—Ç–Ω–∏–∫';
                    
                    document.getElementById('userName').textContent = userData.name;
                    document.getElementById('profileName').textContent = userData.name;
                    document.getElementById('userEmoji').textContent = getNameEmoji(userData.name);
                    document.getElementById('profileAvatar').textContent = getNameEmoji(userData.name);
                }
                
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å —Å–µ—Ä–≤–µ—Ä–∞
                await loadUserData();
            }
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –ª—É–Ω–Ω—ã–π –¥–µ–Ω—å
            updateMoonWidget();
        }

        // ==================== API –§–£–ù–ö–¶–ò–ò ====================
        
        async function loadUserData() {
            try {
                const response = await fetch(`${API_URL}/user/${userData.id}`, {
                    headers: {
                        'X-Telegram-Init-Data': tg?.initData || ''
                    }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    
                    userData = { ...userData, ...data };
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º UI
                    updateUI();
                }
            } catch (e) {
                console.log('API not available, using local mode');
            }
        }

        async function syncWithBot(action, data = {}) {
            try {
                const response = await fetch(`${API_URL}/action`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Telegram-Init-Data': tg?.initData || ''
                    },
                    body: JSON.stringify({
                        user_id: userData.id,
                        action: action,
                        data: data
                    })
                });
                
                if (response.ok) {
                    return await response.json();
                }
            } catch (e) {
                console.log('Sync failed:', e);
            }
            return null;
        }

        // ==================== UI –§–£–ù–ö–¶–ò–ò ====================
        
        function updateUI() {
            // –ó–æ–¥–∏–∞–∫
            if (userData.zodiac) {
                document.getElementById('zodiacBadge').style.display = 'inline-flex';
                document.getElementById('zodiacEmoji').textContent = userData.zodiacEmoji;
                document.getElementById('zodiacName').textContent = userData.zodiac;
                document.getElementById('profileZodiac').textContent = `${userData.zodiacEmoji} ${userData.zodiac}`;
                document.getElementById('horoSign').textContent = userData.zodiacEmoji;
                document.getElementById('horoSignName').textContent = userData.zodiac;
            }
            
            // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
            document.getElementById('statReadings').textContent = userData.readings || 0;
            document.getElementById('statReferrals').textContent = userData.referrals || 0;
            document.getElementById('statDays').textContent = userData.bonusDays || 0;
            
            // –ü–æ–¥–ø–∏—Å–∫–∞
            if (userData.subscription) {
                document.getElementById('subStatus').textContent = '–ê–∫—Ç–∏–≤–Ω–∞ ‚úì';
                document.getElementById('subStatus').style.color = '#10b981';
            }
        }

        function showPage(pageId) {
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω—É—é
            document.getElementById(`page-${pageId}`).classList.add('active');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –Ω–∞–≤–∏–≥–∞—Ü–∏—é
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            const navItem = document.getElementById(`nav-${pageId}`);
            if (navItem) navItem.classList.add('active');
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
            if (pageId === 'money') loadMoneyForecast();
            if (pageId === 'karma') loadKarmaAnalysis();
            
            // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –±–æ—Ç–æ–º
            syncWithBot('page_view', { page: pageId });
            
            // Haptic feedback
            if (tg?.HapticFeedback) {
                tg.HapticFeedback.selectionChanged();
            }
        }

        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            const icon = document.getElementById('toastIcon');
            const text = document.getElementById('toastText');
            
            icon.textContent = type === 'success' ? '‚ú®' : '‚ö†Ô∏è';
            text.textContent = message;
            toast.className = `toast show ${type}`;
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        function getNameEmoji(name) {
            const emojis = ['üåü', '‚ú®', 'üí´', '‚≠ê', 'üîÆ', 'üåô', '‚òÄÔ∏è', 'üåà'];
            const index = name.charCodeAt(0) % emojis.length;
            return emojis[index];
        }

        // ==================== –¢–ê–†–û ====================
        
        let selectedCards = [];
        let tarotType = 'one';

        const TAROT_CARDS = [
            { name: '–®—É—Ç', emoji: 'üÉè', meaning: '–ù–æ–≤—ã–µ –Ω–∞—á–∏–Ω–∞–Ω–∏—è, —Å–ø–æ–Ω—Ç–∞–Ω–Ω–æ—Å—Ç—å, —Å–≤–æ–±–æ–¥–∞ –¥—É—Ö–∞. –í—Ä–µ–º—è –¥–æ–≤–µ—Ä–∏—Ç—å—Å—è –ø–æ—Ç–æ–∫—É –∂–∏–∑–Ω–∏.' },
            { name: '–ú–∞–≥', emoji: 'üé©', meaning: '–°–∏–ª–∞ –≤–æ–ª–∏ –∏ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ. –í—Å–µ —Ä–µ—Å—É—Ä—Å—ã –¥–ª—è —É—Å–ø–µ—Ö–∞ —É —Ç–µ–±—è –µ—Å—Ç—å.' },
            { name: '–í–µ—Ä—Ö–æ–≤–Ω–∞—è –ñ—Ä–∏—Ü–∞', emoji: 'üåô', meaning: '–ò–Ω—Ç—É–∏—Ü–∏—è –∏ —Ç–∞–π–Ω—ã–µ –∑–Ω–∞–Ω–∏—è. –ü—Ä–∏—Å–ª—É—à–∞–π—Å—è –∫ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–º—É –≥–æ–ª–æ—Å—É.' },
            { name: '–ò–º–ø–µ—Ä–∞—Ç—Ä–∏—Ü–∞', emoji: 'üëë', meaning: '–ò–∑–æ–±–∏–ª–∏–µ –∏ –ø–ª–æ–¥–æ—Ä–æ–¥–∏–µ. –í—Ä–µ–º—è –¥–ª—è —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–∞ –∏ –∑–∞–±–æ—Ç—ã.' },
            { name: '–ò–º–ø–µ—Ä–∞—Ç–æ—Ä', emoji: 'üèõÔ∏è', meaning: '–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –∏ –≤–ª–∞—Å—Ç—å. –í—Ä–µ–º—è –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ –ø–æ—Ä—è–¥–∫–∞.' },
            { name: '–í–ª—é–±–ª—ë–Ω–Ω—ã–µ', emoji: 'üíï', meaning: '–í—ã–±–æ—Ä –∏ —Å–æ—é–∑. –í–∞–∂–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö.' },
            { name: '–ö–æ–ª–µ—Å–Ω–∏—Ü–∞', emoji: 'üèÜ', meaning: '–ü–æ–±–µ–¥–∞ –∏ –¥–≤–∏–∂–µ–Ω–∏–µ –≤–ø–µ—Ä—ë–¥. –ü—Ä–µ–æ–¥–æ–ª–µ–Ω–∏–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π.' },
            { name: '–°–∏–ª–∞', emoji: 'ü¶Å', meaning: '–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Å–∏–ª–∞ –∏ –º—É–∂–µ—Å—Ç–≤–æ. –¢–µ—Ä–ø–µ–Ω–∏–µ –ø—Ä–∏–Ω–µ—Å—ë—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç.' },
            { name: '–ö–æ–ª–µ—Å–æ –§–æ—Ä—Ç—É–Ω—ã', emoji: 'üé°', meaning: '–ü–µ—Ä–µ–º–µ–Ω—ã –∏ —Å—É–¥—å–±–∞. –£–¥–∞—á–∞ –Ω–∞ —Ç–≤–æ–µ–π —Å—Ç–æ—Ä–æ–Ω–µ.' },
            { name: '–ó–≤–µ–∑–¥–∞', emoji: '‚≠ê', meaning: '–ù–∞–¥–µ–∂–¥–∞ –∏ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ. –°–≤–µ—Ç–ª–æ–µ –±—É–¥—É—â–µ–µ –≤–ø–µ—Ä–µ–¥–∏.' },
            { name: '–õ—É–Ω–∞', emoji: 'üåï', meaning: '–ò–Ω—Ç—É–∏—Ü–∏—è –∏ –∏–ª–ª—é–∑–∏–∏. –î–æ–≤–µ—Ä—è–π —á—É–≤—Å—Ç–≤–∞–º, –Ω–µ –ª–æ–≥–∏–∫–µ.' },
            { name: '–°–æ–ª–Ω—Ü–µ', emoji: '‚òÄÔ∏è', meaning: '–†–∞–¥–æ—Å—Ç—å –∏ —É—Å–ø–µ—Ö. –í—Å—ë —Å–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è –Ω–∞–∏–ª—É—á—à–∏–º –æ–±—Ä–∞–∑–æ–º.' },
            { name: '–ú–∏—Ä', emoji: 'üåç', meaning: '–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏ –≥–∞—Ä–º–æ–Ω–∏—è. –¶–∏–∫–ª —É—Å–ø–µ—à–Ω–æ –∑–∞–∫—Ä—ã—Ç.' }
        ];

        function openTarotModal(type = 'one') {
            tarotType = type;
            selectedCards = [];
            
            // –°–±—Ä–æ—Å UI
            document.querySelectorAll('.tarot-card').forEach(c => {
                c.classList.remove('selected', 'revealed');
                c.removeAttribute('data-card');
            });
            document.getElementById('tarotResult').style.display = 'none';
            document.getElementById('tarotBtn').style.display = 'block';
            document.getElementById('tarotInstruction').textContent = '–í—ã–±–µ—Ä–∏ –∫–∞—Ä—Ç—É';
            
            document.getElementById('tarotModal').classList.add('active');
            
            if (tg?.HapticFeedback) {
                tg.HapticFeedback.impactOccurred('medium');
            }
        }

        function closeTarotModal() {
            document.getElementById('tarotModal').classList.remove('active');
        }

        function selectTarotCard(card, index) {
            if (card.classList.contains('selected')) {
                card.classList.remove('selected');
                selectedCards = selectedCards.filter(i => i !== index);
            } else {
                card.classList.add('selected');
                selectedCards.push(index);
            }
            
            if (tg?.HapticFeedback) {
                tg.HapticFeedback.selectionChanged();
            }
        }

        async function doTarotReading() {
            if (selectedCards.length === 0) {
                showToast('–í—ã–±–µ—Ä–∏ —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É –∫–∞—Ä—Ç—É', 'error');
                return;
            }
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –ø–µ—Ä–µ–≤–æ—Ä–æ—Ç–∞
            const cards = document.querySelectorAll('.tarot-card');
            const randomCards = [];
            
            selectedCards.forEach((index, i) => {
                const card = cards[index];
                const randomCard = TAROT_CARDS[Math.floor(Math.random() * TAROT_CARDS.length)];
                randomCards.push(randomCard);
                
                setTimeout(() => {
                    card.classList.add('revealed');
                    card.setAttribute('data-card', randomCard.emoji);
                    
                    if (tg?.HapticFeedback) {
                        tg.HapticFeedback.impactOccurred('heavy');
                    }
                }, i * 300);
            });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            setTimeout(() => {
                const resultCard = randomCards[0];
                document.getElementById('cardName').textContent = `${resultCard.emoji} ${resultCard.name}`;
                document.getElementById('cardInterpretation').textContent = resultCard.meaning;
                document.getElementById('tarotResult').style.display = 'block';
                document.getElementById('tarotBtn').style.display = 'none';
                
                // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –±–æ—Ç–æ–º
                syncWithBot('tarot_reading', { 
                    type: tarotType, 
                    cards: randomCards.map(c => c.name) 
                });
                
            }, selectedCards.length * 300 + 500);
        }

        // ==================== –ì–û–†–û–°–ö–û–ü ====================
        
        async function loadHoroscope(period) {
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–∞–±—ã
            document.querySelectorAll('.horoscope-tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ª–æ–∞–¥–µ—Ä
            document.getElementById('horoscopeContent').innerHTML = `
                <div class="loader"><div class="loader-spinner"></div></div>
            `;
            
            // –ó–∞–ø—Ä–æ—Å –∫ API
            const result = await syncWithBot('horoscope', { 
                period: period,
                zodiac: userData.zodiac || '–û–≤–µ–Ω'
            });
            
            // –í—Ä–µ–º–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
            setTimeout(() => {
                const texts = {
                    today: '–°–µ–≥–æ–¥–Ω—è –∑–≤—ë–∑–¥—ã –±–ª–∞–≥–æ–≤–æ–ª—è—Ç –Ω–æ–≤—ã–º –Ω–∞—á–∏–Ω–∞–Ω–∏—è–º. –û—Ç–ª–∏—á–Ω—ã–π –¥–µ–Ω—å –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π!',
                    tomorrow: '–ó–∞–≤—Ç—Ä–∞ –æ–∂–∏–¥–∞–µ—Ç—Å—è –ø—Ä–∏—Ç–æ–∫ –ø–æ–∑–∏—Ç–∏–≤–Ω–æ–π —ç–Ω–µ—Ä–≥–∏–∏. –•–æ—Ä–æ—à–∏–π –º–æ–º–µ–Ω—Ç –¥–ª—è –≤–∞–∂–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π.',
                    week: '–ù–µ–¥–µ–ª—è –ø—Ä–∏–Ω–µ—Å—ë—Ç –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏. –ë—É–¥—å—Ç–µ –æ—Ç–∫—Ä—ã—Ç—ã –ø–µ—Ä–µ–º–µ–Ω–∞–º.',
                    love: '–í –ª—é–±–æ–≤–Ω—ã—Ö –¥–µ–ª–∞—Ö —Ü–∞—Ä–∏—Ç —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞. –í—Ä–µ–º—è –¥–ª—è –ø—Ä–∏–∑–Ω–∞–Ω–∏–π.',
                    money: '–§–∏–Ω–∞–Ω—Å–æ–≤–∞—è —É–¥–∞—á–∞ –Ω–∞ –≤–∞—à–µ–π —Å—Ç–æ—Ä–æ–Ω–µ. –•–æ—Ä–æ—à–∏–π –ø–µ—Ä–∏–æ–¥ –¥–ª—è –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π.'
                };
                
                document.getElementById('horoscopeContent').innerHTML = `
                    <div class="horoscope-section">
                        <div class="horoscope-section-title">üåü –ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞ ${period}</div>
                        <div class="horoscope-text">${result?.text || texts[period]}</div>
                    </div>
                `;
            }, 1000);
        }

        // ==================== –°–û–í–ú–ï–°–¢–ò–ú–û–°–¢–¨ ====================
        
        let selectedPartnerSign = null;

        const ZODIAC_DATA = {
            aries: { name: '–û–≤–µ–Ω', emoji: '‚ôà' },
            taurus: { name: '–¢–µ–ª–µ—Ü', emoji: '‚ôâ' },
            gemini: { name: '–ë–ª–∏–∑–Ω–µ—Ü—ã', emoji: '‚ôä' },
            cancer: { name: '–†–∞–∫', emoji: '‚ôã' },
            leo: { name: '–õ–µ–≤', emoji: '‚ôå' },
            virgo: { name: '–î–µ–≤–∞', emoji: '‚ôç' },
            libra: { name: '–í–µ—Å—ã', emoji: '‚ôé' },
            scorpio: { name: '–°–∫–æ—Ä–ø–∏–æ–Ω', emoji: '‚ôè' },
            sagittarius: { name: '–°—Ç—Ä–µ–ª–µ—Ü', emoji: '‚ôê' },
            capricorn: { name: '–ö–æ–∑–µ—Ä–æ–≥', emoji: '‚ôë' },
            aquarius: { name: '–í–æ–¥–æ–ª–µ–π', emoji: '‚ôí' },
            pisces: { name: '–†—ã–±—ã', emoji: '‚ôì' }
        };

        async function selectSign(element, sign) {
            // –£–±–∏—Ä–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ
            document.querySelectorAll('.compat-sign').forEach(s => s.classList.remove('selected'));
            element.classList.add('selected');
            selectedPartnerSign = sign;
            
            // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
            const score = Math.floor(Math.random() * 40) + 60; // 60-100%
            const partner = ZODIAC_DATA[sign];
            const user = userData.zodiacEmoji || '‚ôà';
            
            document.getElementById('compatPair').textContent = `${user} + ${partner.emoji}`;
            document.getElementById('compatScore').textContent = `${score}%`;
            document.getElementById('compatBar').style.width = `${score}%`;
            
            const texts = [
                '–û—Ç–ª–∏—á–Ω–∞—è –ø–∞—Ä–∞! –ú–µ–∂–¥—É –≤–∞–º–∏ —Å–∏–ª—å–Ω–∞—è —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∞—è —Å–≤—è–∑—å.',
                '–•–æ—Ä–æ—à–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å. –ï—Å—Ç—å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª –¥–ª—è –∫—Ä–µ–ø–∫–∏—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏–π.',
                '–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ–µ —Å–æ—á–µ—Ç–∞–Ω–∏–µ! –†–∞–∑–Ω—ã–µ —Ç–µ–º–ø–µ—Ä–∞–º–µ–Ω—Ç—ã –¥–æ–ø–æ–ª–Ω—è—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞.',
                '–ì–∞—Ä–º–æ–Ω–∏—á–Ω—ã–π —Å–æ—é–∑. –í—ã –ø–æ–Ω–∏–º–∞–µ—Ç–µ –¥—Ä—É–≥ –¥—Ä—É–≥–∞ –Ω–∞ –≥–ª—É–±–∏–Ω–Ω–æ–º —É—Ä–æ–≤–Ω–µ.'
            ];
            document.getElementById('compatText').textContent = texts[Math.floor(Math.random() * texts.length)];
            
            document.getElementById('compatResult').style.display = 'block';
            
            // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
            syncWithBot('compatibility', { 
                partner: sign,
                score: score 
            });
            
            if (tg?.HapticFeedback) {
                tg.HapticFeedback.notificationOccurred('success');
            }
        }

        // ==================== –õ–£–ù–ê ====================
        
        function updateMoonWidget() {
            const moonDays = [
                { day: 1, phase: 'üåë –ù–æ–≤–æ–ª—É–Ω–∏–µ', good: true },
                { day: 7, phase: 'üåì –ü–µ—Ä–≤–∞—è —á–µ—Ç–≤–µ—Ä—Ç—å', good: true },
                { day: 14, phase: 'üåï –ü–æ–ª–Ω–æ–ª—É–Ω–∏–µ', good: false },
                { day: 21, phase: 'üåó –ü–æ—Å–ª–µ–¥–Ω—è—è —á–µ—Ç–≤–µ—Ä—Ç—å', good: true },
                { day: 28, phase: 'üåò –£–±—ã–≤–∞—é—â–∞—è', good: true }
            ];
            
            const today = new Date().getDate();
            const moonDay = (today % 30) + 1;
            const phase = moonDay < 15 ? 'üåí –†–∞—Å—Ç—É—â–∞—è –ª—É–Ω–∞' : 'üåò –£–±—ã–≤–∞—é—â–∞—è –ª—É–Ω–∞';
            const signs = ['–û–≤–µ–Ω', '–¢–µ–ª–µ—Ü', '–ë–ª–∏–∑–Ω–µ—Ü—ã', '–†–∞–∫', '–õ–µ–≤', '–î–µ–≤–∞', '–í–µ—Å—ã', '–°–∫–æ—Ä–ø–∏–æ–Ω', '–°—Ç—Ä–µ–ª–µ—Ü', '–ö–æ–∑–µ—Ä–æ–≥', '–í–æ–¥–æ–ª–µ–π', '–†—ã–±—ã'];
            const moonSign = signs[today % 12];
            
            const moonEmoji = moonDay < 8 ? 'üåí' : moonDay < 15 ? 'üåì' : moonDay < 22 ? 'üåî' : 'üåò';
            
            document.getElementById('moonEmoji').textContent = moonEmoji;
            document.getElementById('moonDay').textContent = `${moonDay} –ª—É–Ω–Ω—ã–π –¥–µ–Ω—å`;
            document.getElementById('moonPhase').textContent = `${phase} ‚Ä¢ ${moonSign}`;
            
            document.getElementById('moonBigEmoji').textContent = moonEmoji;
            document.getElementById('moonBigDay').textContent = `${moonDay} –ª—É–Ω–Ω—ã–π –¥–µ–Ω—å`;
            document.getElementById('moonBigPhase').textContent = `${phase} –≤ ${moonSign}–µ`;
        }

        // ==================== –î–ï–ù–ï–ñ–ù–´–ô –ü–†–û–ì–ù–û–ó ====================
        
        async function loadMoneyForecast() {
            const result = await syncWithBot('money_forecast', {});
            
            setTimeout(() => {
                document.getElementById('moneyContent').innerHTML = `
                    <div style="font-weight: 600; margin-bottom: 12px; color: var(--accent-gold);">üí∞ –ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞ –Ω–µ–¥–µ–ª—é</div>
                    <div style="color: var(--text-secondary); line-height: 1.8;">
                        ${result?.text || `
                        <p>‚úÖ <strong>–ë–ª–∞–≥–æ–ø—Ä–∏—è—Ç–Ω—ã–µ –¥–Ω–∏:</strong> –í—Ç–æ—Ä–Ω–∏–∫, –ß–µ—Ç–≤–µ—Ä–≥</p>
                        <p>üí∏ <strong>–õ—É—á—à–µ –∏–∑–±–µ–≥–∞—Ç—å —Ç—Ä–∞—Ç:</strong> –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫</p>
                        <p>üìà <strong>–°–æ–≤–µ—Ç:</strong> –•–æ—Ä–æ—à–µ–µ –≤—Ä–µ–º—è –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –±—é–¥–∂–µ—Ç–∞ –∏ –Ω–µ–±–æ–ª—å—à–∏—Ö –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π.</p>
                        <p>üîÆ <strong>–≠–Ω–µ—Ä–≥–∏—è –¥–µ–Ω–µ–≥:</strong> –°—Ç–∞–±–∏–ª—å–Ω–∞—è, —Å —Ç–µ–Ω–¥–µ–Ω—Ü–∏–µ–π –∫ —Ä–æ—Å—Ç—É.</p>
                        `}
                    </div>
                `;
            }, 1500);
        }

        // ==================== –ö–ê–†–ú–ò–ß–ï–°–ö–ò–ô –ê–ù–ê–õ–ò–ó ====================
        
        async function loadKarmaAnalysis() {
            const result = await syncWithBot('karma_analysis', {});
            
            setTimeout(() => {
                document.getElementById('karmaContent').innerHTML = `
                    <div style="font-weight: 600; margin-bottom: 12px; color: var(--accent-purple);">üîÆ –ö–∞—Ä–º–∏—á–µ—Å–∫–∏–µ —É—Ä–æ–∫–∏</div>
                    <div style="color: var(--text-secondary); line-height: 1.8;">
                        ${result?.text || `
                        <p>üåü <strong>–ü—Ä–æ—à–ª–∞—è –∂–∏–∑–Ω—å:</strong> –¢—ã –±—ã–ª(–∞) —Å–≤—è–∑–∞–Ω(–∞) —Å –∏—Å–∫—É—Å—Å—Ç–≤–æ–º –∏ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ–º.</p>
                        <p>üìö <strong>–ì–ª–∞–≤–Ω—ã–π —É—Ä–æ–∫:</strong> –ù–∞—É—á–∏—Ç—å—Å—è –¥–æ–≤–µ—Ä—è—Ç—å —Å–≤–æ–µ–π –∏–Ω—Ç—É–∏—Ü–∏–∏.</p>
                        <p>üíé <strong>–¢–∞–ª–∞–Ω—Ç –∏–∑ –ø—Ä–æ—à–ª–æ–≥–æ:</strong> –¶–µ–ª–∏—Ç–µ–ª—å—Å—Ç–≤–æ –∏ –ø–æ–º–æ—â—å –¥—Ä—É–≥–∏–º.</p>
                        <p>‚ö° <strong>–ö–∞—Ä–º–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥:</strong> –†–∞–∑–≤–∏–≤–∞—Ç—å —Ç–µ—Ä–ø–µ–Ω–∏–µ –∏ –ø—Ä–∏–Ω—è—Ç–∏–µ.</p>
                        `}
                    </div>
                `;
            }, 2000);
        }

        // ==================== –ü–õ–ê–¢–ï–ñ–ò ====================
        
        function buyPremium(method) {
            if (method === 'stars' && tg) {
                // Telegram Stars
                tg.openInvoice('stars_subscription_payload', (status) => {
                    if (status === 'paid') {
                        showToast('–ü–æ–¥–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞! üéâ');
                        userData.subscription = true;
                        updateUI();
                        syncWithBot('subscription_activated', { method: 'stars' });
                    }
                });
            } else {
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ –±–æ—Ç –¥–ª—è –æ–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ –ÆKassa
                syncWithBot('buy_premium', { method: 'yookassa' });
                
                if (tg) {
                    tg.close();
                }
            }
        }

        // ==================== –†–ï–§–ï–†–ê–õ–¨–ù–ê–Ø –ü–†–û–ì–†–ê–ú–ú–ê ====================
        
        function shareReferral() {
            const referralLink = `https://t.me/${window.BOT_USERNAME || 'AstroAI_bot'}?start=ref_${userData.id}`;
            const text = `üîÆ –û—Ç–∫—Ä–æ–π –¥–ª—è —Å–µ–±—è –º–∏—Ä –¢–∞—Ä–æ –∏ –∞—Å—Ç—Ä–æ–ª–æ–≥–∏–∏!\n\n${referralLink}`;
            
            if (tg) {
                tg.switchInlineQuery(text, ['users']);
            } else {
                navigator.clipboard?.writeText(referralLink);
                showToast('–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞!');
            }
            
            syncWithBot('share_referral', {});
        }
    </script>
</body>
</html>